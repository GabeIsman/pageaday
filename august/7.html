<!doctype>
<html>
  <head>
    <link href='http://fonts.googleapis.com/css?family=Raleway:300' rel='stylesheet' type='text/css'>
    <style>
      * {
        padding: 0;
        margin: 0;
      }
      body {
        background-color: #333;
        font-family: 'Raleway';
      }
      .grid {
        position: absolute;
      }
      .text {
        text-align: center;
        position: absolute;
        font-size: 72px;
        color: #fff;
        opacity: .5;
        padding-top: 20%;
      }
      .over {
        z-index: 1;
      }
    </style>
  </head>
  <body>
    <div class="text over">
      Life is beautiful.
    </div>
    <div class="text">
      I slept through my alarm, missed breakfast, haven't had any coffee, and am grumpy.
    </div>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min.js"></script>
    <script type="text/javascript">
      $(document).ready(function() {
        var body = $('body');
        var numTiles = 21;
        var tiles = [];
        var tileWidth = window.innerWidth / numTiles;
        var tileHeight = window.innerHeight / numTiles;
        for (var x = 0; x < numTiles; x++) {
          for (var y = 0; y < numTiles; y++) {
            var color = 'rgb(' + Math.floor(x / numTiles * 255) + ',' + Math.floor(y / numTiles * 255) + ',' + Math.floor(y / numTiles * 255) + ')';
            console.log(color);
            var tile = $(document.createElement('div'))
                .css({
                  left: x * tileWidth + 'px',
                  top: y * tileHeight + 'px',
                  width: tileWidth,
                  height: tileHeight,
                  backgroundColor: color,
                }).addClass('grid');
            tiles[x] = tiles[x] || []
            tiles[x][y] = tile;
            setTimeout(_.bind(function(tile) {
              console.log('animating');
              tile.animate({opacity: 0}, Math.random() * 1000 + 500);
            }, undefined, tile), Math.random() * 5000 + 3000);
            body.append(tile);
          }
        }

        $('.text.over').animate({opacity: 0}, 3000);
      });
    </script>
  </body>
</html>
